<html>
<!DOCTYPE html>
<head>
 <!-- metadata about page -->
 <title>LBI Records Search</title>
 <meta charset="Unicode">
 <meta http-equiv="Content-Style-Type" content="text/css">
 <meta name="description" content="Kingdom of Loquntia">
 <meta name="keywords" content="Loquntia,KL,Micronation">
 <meta name="author" content="John Houston">
 
 <!-- load scripts -->
 <script language="javascript" src="/scripts/standard.js"></script>
<script language="javascript">
function search()
{
    if(document.dataBaseSearch.searchSpecific.checked == true && document.dataBaseSearch.viewDoc.checked == false)
    {
    searchSpecific(document.dataBaseSearch.agency.value);
    }
    else if(document.dataBaseSearch.viewDoc.checked == true && document.dataBaseSearch.searchSpecific.checked == false)
    {
    document.dataBaseSearch.field.disabled=true;viewDoc();
    }
    else
    {
    document.getElementById("output").innerHTML = "You must select where to search.<br>";
    }
}
function searchSpecific(agency)
{
document.dataBaseSearch.field.disabled=true;document.getElementById("found").innerHTML="";
document.dataBaseSearch.start.value = Date.now();
searchDatabaseLast(agency);
}
function done()
{
document.getElementById("output").innerHTML = document.getElementById("found").innerHTML + "<p>" + document.dataBaseSearch.hits.value + " result(s) found in " + eval((Date.now() - document.dataBaseSearch.start.value) / 1000) + " seconds.<br>";
document.dataBaseSearch.field.disabled=false;
}

function searchDatabase(agency)
{
document.dataBaseSearch.hits.value = "0";
if (document.dataBaseSearch.input.value.toUpperCase().length < 2)
{
document.getElementById("output").innerHTML = "Search query must be at least two characters long.<br>";
}
else if (document.dataBaseSearch.input.value.toUpperCase() == "")
{

}
else
{
document.getElementById("output").innerHTML = "Searching LBI database...<br>";
document.dataBaseSearch.entry.value = "1";
searchLoop(agency);
}
}
function searchLoop(agency)
{
    $(function(){
   $("#entry").load("https://e7260a03fc46cb7172382da0414ee8272d86496d.googledrive.com/host/0B7CSGGoPIUWiZ1UwazJldmpEVlk/records/" + agency + "/" + document.dataBaseSearch.input.value.toLowerCase() + "-" + document.dataBaseSearch.entry.value + ".txt"); 
    });
setTimeout("checkHits();",3000)
}

function checkHits()
{
if (document.getElementById("entry").innerHTML != "")
{
document.getElementById("found").innerHTML += "<p><pre class='searchResult'>" + document.getElementById("entry").innerHTML + "</pre></p>";document.dataBaseSearch.hits.value=eval(document.dataBaseSearch.hits.value + "+ 1");document.dataBaseSearch.entry.value=eval(document.dataBaseSearch.entry.value + "+ 1");document.getElementById("entry").innerHTML="";searchLoop();
}
else
{
done();
}
}


function viewDocument()
{
document.dataBaseSearch.hits.value = "0";
if (document.dataBaseSearch.input.value.toUpperCase().length != 6)
{
document.getElementById("output").innerHTML = "This is not a valid 6-digit document code.<br>";
}
else if (document.dataBaseSearch.input.value.toUpperCase() == "")
{

}
else
{
document.getElementById("output").innerHTML = "Downloading document <tt>" + document.dataBaseSearch.input.value + "</tt>...<br>";
document.dataBaseSearch.entry.value = "1";
downloadDocument();
}
}
function downloadDocument()
{
    $(function(){
   $("#entry").load("https://e7260a03fc46cb7172382da0414ee8272d86496d.googledrive.com/host/0B7CSGGoPIUWiZ1UwazJldmpEVlk/records/" + "ordered" + "/" + document.dataBaseSearch.input.value.toLowerCase() + "-" + document.dataBaseSearch.entry.value + ".txt"); 
    });
setTimeout("checkDocument()", 10000);
}

function checkHitsLast()
{
if (document.getElementById("entry").innerHTML != "")
{
document.getElementById("found").innerHTML += "<p><div class='searchResult'><a href='" + document.getElementById("entry").innerHTML + "'>" + "View Document: " + document.dataBaseSearch.input.value + "</a></div></p>";document.dataBaseSearch.hits.value=eval(document.dataBaseSearch.hits.value + "+ 1");document.dataBaseSearch.entry.value=eval(document.dataBaseSearch.entry.value + "+ 1");document.getElementById("entry").innerHTML="";
}
else
{
document.getElementById("output").innerHTML = "The specified document <tt>" + document.dataBaseSearch.input.value + "</tt> could not be found.";document.dataBaseSearch.field.disabled=false;
}
}

String.prototype.hashCode = function(){

  var hash = 0;

  if (this.length == 0) return hash;

  for (i = 0; i < this.length; i++) {

      char = this.charCodeAt(i);

      hash = ((hash<<5)-hash)+char;

      hash = hash & hash; // Convert to 32bit integer

  }

    return hash;

}

</script>
 <script src="/scripts/jquery.js"></script>

 <!-- the following script loads the header and footer using JQuery -->
 <script language="javascript">
    $(function(){
   $("#header").load("/templates/header.txt"); $("#footer").load("/templates/footer.txt");
    });
 </script>
 
 <!-- load stylesheet and favicons -->
 <link rel="stylesheet" type="text/css" href="/scripts/standard.css" />
 <link rel="icon" href="/images/favicon16.png" sizes="16x16" type="image/png" />
 <link rel="icon" href="/images/favicon32.png" sizes="32x32" type="image/png" /> 
 <link rel="icon" type="image/ico" href="images/favicon.ico" />

</head>



<body id="css-zen-garden">
<div class="page-wrapper">


<!-- official title of page here (will become window/tab title)-->


<!-- loads header data here -->
<div id="header"></div>

<!-- body content -->
<div id="entry" style="display:none;"></div>
<div id="searchingAll" style="display:none;"></div>
<div id="found" style="display:none;"></div>
<div class="summary" role="article">

			<p>Search through an index of all paper and digital records held by the Loquntian Government.</p>

			</div>
			
                <div class="preamble" role="article">
                <h3>Government Records Database</h3>
                This index allows you to search all government documents held by the Loquntian Government. Each agency stores records using a different numbering system, outlined below.
                <ul>
                <li>
                    <b>Supreme Court of Loquntia</b><br>
                    <p>Records are sorted by case number, starting with the year, and then a unique 2 digit number. (e.g. 2015-03, 2014-09F)</p>
                </li>
                </ul>
                
			<form name="dataBaseSearch" action="javascript:search()" autocomplete="off">
			<fieldset name="field">
			<legend><h3>Search Index</h3></legend>
                                <p>
				<input type="hidden" name="entry" value="0">
				<input type="hidden" name="hits" value="0">
				<input type="hidden" name="start" value="">
                                <input type="checkbox" name="searchSpecific" onclick="if(this.checked==true){document.dataBaseSearch.searchAll.checked=false;document.dataBaseSearch.input.placeholder='Search Query';}else{this.checked=true;}" checked> Search the following agency's records:&ensp;
                                <select name="agency" required>
                                <option value="100">Supreme Court of Loquntia</option>
				<option value="m">HM Royal Military</option>
				<option value="mex">HM Ministry of the Exchequer</option>
				<option value="mfa">HM Ministry of Foreign Affairs</option>
				<option value="cr">Crown Vital Records Office</option>
				<option value="rms">Royal Marshals Service</option>
				<option value="cfc">Department of Collections, Forfeiture and Compensations</option>
				</select>
				</p>
				
				<p>
				<input type="checkbox" name="searchAll" onclick="if(this.checked==true){document.dataBaseSearch.searchSpecific.checked=false;document.dataBaseSearch.input.placeholder='Document Code';}else{this.checked=true;}"> View a digital document you have checked out.<br>Click here to check out a document you have searched, be sure to specify the number
				</p>
				
				<p>
				<input type="text" name="input" placeholder="Search Query" required><input type="submit" style="width:0px; height:0px; opacity:0;">&ensp;<input type="submit" name="submitBtn" value="Search">&ensp;
				</p>
                        </fieldset>
			</form>
				<div id="output"></div>

                </div>
<!-- loads footer data here -->
<div id="footer"></div>

</body>
</html>